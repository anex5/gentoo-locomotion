
diff --git a/v8/src/objects/value-serializer.cc b/v8/src/objects/value-serializer.cc
index 3df1bb1..d5f5f05 100644
--- a/v8/src/objects/value-serializer.cc
+++ b/v8/src/objects/value-serializer.cc
@@ -864,6 +864,11 @@ Maybe<bool> ValueSerializer::WriteJSArrayBuffer(
     WriteVarint(index.FromJust());
     return ThrowIfOutOfMemory();
   }
+  if (!array_buffer->is_detachable()) {
+    ThrowDataCloneError(
+        MessageTemplate::kDataCloneErrorNonDetachableArrayBuffer);
+    return Nothing<bool>();
+  }
 
   uint32_t* transfer_entry = array_buffer_transfer_map_.Find(array_buffer);
   if (transfer_entry) {

